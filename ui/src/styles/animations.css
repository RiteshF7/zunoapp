/* ── View Transitions API (smooth navigation) ── */
#page { view-transition-name: page-content; }
::view-transition-old(page-content) { animation: viewTransitionFadeOut .2s ease-out forwards; }
::view-transition-new(page-content) { animation: viewTransitionFadeIn .25s ease-out forwards; }
@keyframes viewTransitionFadeOut { to { opacity: 0; } }
@keyframes viewTransitionFadeIn { from { opacity: 0; } to { opacity: 1; } }

/* ── Page Transitions ── */
.fade-in { animation: fadeIn .25s ease-out; }
.slide-in-right { animation: slideRight .25s ease-out; }
.slide-in-left { animation: slideLeft .25s ease-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideRight { from { opacity: 0; transform: translateX(24px); } to { opacity: 1; transform: translateX(0); } }
@keyframes slideLeft { from { opacity: 0; transform: translateX(-24px); } to { opacity: 1; transform: translateX(0); } }

/* ── Spinner ── */
.spinner { border: 3px solid var(--c-border); border-top-color: var(--c-accent); border-radius: 50%; width: 24px; height: 24px; animation: spin .6s linear infinite; display: inline-block; }
.animate-spin { animation: spin .6s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* ── Skeleton Shimmer ── */
@keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
.skeleton-line {
  background: linear-gradient(90deg, var(--c-surface-hover) 25%, var(--c-border) 50%, var(--c-surface-hover) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 8px;
}

/* ── Typing Indicator ── */
.typing-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--c-muted); display: inline-block; animation: typingBounce .8s ease-in-out infinite; }
.typing-dot:nth-child(2) { animation-delay: .15s; }
.typing-dot:nth-child(3) { animation-delay: .3s; }
@keyframes typingBounce { 0%,60%,100% { transform: translateY(0); } 30% { transform: translateY(-6px); } }

/* ── Bookmark Pop ── */
@keyframes bookmarkPop { 0% { transform: scale(1); } 40% { transform: scale(1.3); } 100% { transform: scale(1); } }
.bookmark-pop { animation: bookmarkPop .3s ease-out; }

/* ── Check Bounce ── */
@keyframes checkBounce { 0% { transform: scale(0.8); } 50% { transform: scale(1.15); } 100% { transform: scale(1); } }
.check-bounce { animation: checkBounce .3s ease-out; }

/* ── Toast ── */
@keyframes toastSlide { from { opacity: 0; transform: translate(-50%, -12px); } to { opacity: 1; transform: translate(-50%, 0); } }
.toast-enter { animation: toastSlide .25s ease-out forwards; }

/* ── Modal ── */
@keyframes modalUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
.modal-up { animation: modalUp .3s cubic-bezier(.16,1,.3,1); }

/* ── Progress Ring ── */
.progress-ring-circle { transition: stroke-dashoffset 0.5s ease; }

/* ── Global loading bar (save / AI) ── */
.global-loading-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  z-index: 90;
  overflow: hidden;
  background: var(--c-border);
}
.global-loading-bar.hidden { display: none; }
.global-loading-bar-inner {
  height: 100%;
  width: 40%;
  max-width: 200px;
  background: var(--c-accent);
  animation: loadingBarSlide 1.2s ease-in-out infinite;
}
@keyframes loadingBarSlide {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(350%); }
  100% { transform: translateX(-100%); }
}

/* Inline indeterminate progress bar (modal + content card) */
.progress-bar-inline {
  height: 4px;
  overflow: hidden;
  background: var(--c-border);
  border-radius: 2px;
}
.progress-bar-inline-inner {
  height: 100%;
  width: 40%;
  max-width: 120px;
  background: var(--c-accent);
  animation: loadingBarSlide 1.2s ease-in-out infinite;
  border-radius: 2px;
}
@media (prefers-reduced-motion: reduce) {
  .progress-bar-inline-inner,
  .global-loading-bar-inner {
    animation: none;
    width: 100%;
    opacity: 0.6;
  }
}

/* New item highlight (brief accent border after save) */
.new-item-highlight {
  box-shadow: 0 0 0 2px var(--c-accent);
  animation: newItemPulse 1.5s ease-out;
}
@keyframes newItemPulse {
  0% { box-shadow: 0 0 0 2px var(--c-accent); }
  100% { box-shadow: 0 0 0 0 transparent; }
}
@media (prefers-reduced-motion: reduce) {
  .new-item-highlight {
    animation: none;
    box-shadow: 0 0 0 2px var(--c-accent);
  }
}
